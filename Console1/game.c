#include "game.h"
//#include "util.h" //game.h에 util.h를 넣어주었기에 이 소스에서 util.h를 포함시켜줄 필요가 없다.

char tempMap[14][80];

char map1[14][80] = {
{ "11111111111111111111111111111111111111111111111111111111111111111111111111111111" },
{ "10000000000000000000000000000000000000000000000000000000000000000000000000000001" },
{ "10000000000000000000000000000000000000000000000000000000000000000000000000000001" },
{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
{ "10s0100000000000000000000000000000000000000000000000000000000000q000000000000001" },
{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
{ "11111111111111111111111111111111111111111111111111111111111111111111111111111111" }
};

//char map2[14][80] = {
//	{ "11111111111111111111111111111111111111111111111111111111111111111111111111111111" },
//{ "10000000000000000000000000000000000000000000000000000000000000000000000000000001" },
//{ "10000000000000000000000000000000000000000000000000000000000000000000000000000001" },
//{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
//{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
//{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
//{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
//{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
//{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
//{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
//{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
//{ "10s0100000000000000000000000000000000000000000000000000000000000q000000000000001" },
//{ "10001000000000000000000000000000000000000000000000000000000000000000000000000001" },
//{ "11111111111111111111111111111111111111111111111111111111111111111111111111111111" }
//};
//
//

void Title() //탭과 스페이스바 구분 확실히.
{
	/*printf("\n\n\n\n");
	printf("				   #####       ### \n");
	printf("				   #          #    \n");
	printf("				   #####      #### \n");
	printf("				   #              # \n");
	printf("				   #####      #### \n");*/
	printf(TITLE);
}

int Menu()
{
	int i = 0;
	int x = 38;
	int y = 12;

	gotoxy(x - 2, y); //마우스 커서위치를 적은 좌표까지 옮김
	printf("> 게 임 시 작  "); //위 gotoxy함수로 지정한 좌표까지 커서위치가 옮겨졌으니, 거기에 출력
	gotoxy(x, y + 1);
	printf("게 임 정 보 ");
	gotoxy(x, y + 2);
	printf("   종  료\n");

	while (1)
	{
		int num = KeyControl(); // * 0이 계속 들어간다 지속적인 값으로 0이 계속들어가서 w키가 계속 작동했던 것. 해결점 찾았다
		switch (num)
		{
		case UP:
		{
			if (y > 12)
			{
				gotoxy(x - 2, y);
				printf(" ");
				gotoxy(x - 2, --y);
				printf(">");
			}
			break;
		}

		case DOWN:
		{
			if (y < 14)
			{
				gotoxy(x - 2, y);
				printf(" ");
				gotoxy(x - 2, ++y);
				printf(">");
			}
			break;
		}

		case SUBMIT: 
		{
			return y - 12;
		}
			break;
		}
	}
}

int KeyControl() //입력을 받으면 int형으로 함수에 값을 반환해줌
{
	char temp = _getch(); //getch는 비표준 입력함수 conio 헤더파일이 필요.

	if (temp == 'w' || temp == 'W') return UP;
	else if (temp == 'a' || temp == "A") return LEFT;
	else if (temp == 's' || temp == 'S') return DOWN;
	else if (temp == 'd' || temp == 'D') return RIGHT;
	else if (temp == ' ') return SUBMIT;
	else if (temp == 13) return SUBMIT;

}

void infoDraw()
{
	system("cls");
	printf("\n\n");
	printf("				     [ 조 작 법 ]\n\n");
	printf("				이 동 : W, A, S D\n");
	printf("				선 택 : 스 페 이 스 바 \n\n\n\n\n\n\n");
	printf("			           개 발 자 : Pang\n\n");
	printf("			스 페 이 스 바 를  누 르 면  메 인 화 면 으 로	\n				    이 동 합 니 다 .");

	while (1)
	{
		if (KeyControl() == SUBMIT)
		{
			system("CLS");
			break;
		}
	}
}

int mapList()
{
	int i = 0;
	int x = 39;
	int y = 7;

	gotoxy(x-1, y - 6);
	printf("[ 난 이 도 ]");
	gotoxy(x - 2, y);
	printf(">   쉬 움  ");
	gotoxy(x, y + 2);
	printf("어 려 움 ");
	gotoxy(x, y + 4);
	printf("  뒤 로\n");

	while (1) //루프
	{
		int num = KeyControl();
		switch (num)
		{
		case UP: 
		{
			if (y > 7)
			{
				gotoxy(x - 2, y);
				printf(" ");
				gotoxy(x - 2, y-2);
				printf(">");
				y -= 2;
			}
			break;
		}

		case DOWN: 
		{
			if (y < 11)
			{
				gotoxy(x - 2, y);
				printf(" ");
				gotoxy(x - 2, y+2);
				printf(">");
				y += 2;
			}
			break;
		}

		case SUBMIT: 
		{
			return y - 7;
		}
			 break;
		}
	}
}

void drawmap()
{
	system("cls");
	int h, w;

	for (h = 0; h < 14; h++)
	{
		for (w = 0; w < 80; w++)
		{
			char temp = tempMap[h][w];
			if (temp == '0'){
				setColor(black, black);
				printf(" ");
			}else if (temp == '1'){
				setColor(white, white);
				printf("#");
			}else if (temp == 's'){
				setColor(cyan, black);
				printf("@");
			}else if (temp == 'q'){
				setColor(lightgreen, black);
				printf("0");
			}
		}
		printf("\n");
	}
	system("pause");
	setColor(white, black);
}

//void gLoop(int mapCode)
//{
//	int playing = 1;
//	memcpy
//
//}











